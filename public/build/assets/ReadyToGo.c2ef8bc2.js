import{i as M,u as V,c as l,h as s,e as d,n as u,w as r,f as o,s as k,F as O,t as w,v as T,x as b,l as y,y as x,z as D,A as c,p as G,m as p,j as z,C as S,G as B}from"./app.10579c01.js";const F={class:"row flex-center"},$={key:2},q={class:"row"},P={__name:"ReadyToGo",props:{item:Object,operationID:Number},setup(I){const n=I;let R=M("can");const i=V();let j=async e=>{var t={user_status_id:3,system_id:n.item.id};await axios({method:"put",url:"/api/onthewayreadytogo/"+n.operationID+"/"+e,data:t,withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}})},A=e=>!!(R("campaigns_admin_access")||i.user_id==e.user_id),H=e=>{var t={user_status_id:1,system_id:null};axios({method:"put",url:"/api/onthewayreadytogo/"+n.operationID+"/"+e,data:t,withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}})},m=l(()=>W.value>0?N.value>0?1:2:0),v=l(()=>{var e=i.getOwnHackingCharOnOpAllHackers(n.operationID);return e||[]}),W=l(()=>v.value?v.value.length:0),f=l(()=>{var e=i.getOwnHackingCharOnOpAllHackers(n.operationID);return e&&(e=e.filter(t=>t.user_status_id!=4),e=e.filter(t=>t.system_id==n.item.id?t.user_status_id!=3:!0)),e||[]}),N=l(()=>f.value?f.value.length:0),_=l(()=>i.getOpUsersReadyToGoAll.filter(e=>e.system_id==n.item.id)),C=l(()=>_.value?_.value.length:0),Q=l(()=>C.value==0),g=l(()=>{var e=i.getOwnHackingCharOnOp(n.operationID);if(e)var t=e.filter(a=>a.system_id==n.item.id&&a.user_status_id==3).length;else var t=0;return t>0?"green":"red"});return(e,t)=>(s(),d("div",F,[m.value==1?(s(),u(p,{key:0,color:g.value,class:"myOutLineButtonMid","no-caps":"",label:"Ready To Go",rounded:""},{default:r(()=>[o(G,null,{default:r(()=>[o(k,{style:{"min-width":"100px"}},{default:r(()=>[(s(!0),d(O,null,w(f.value,(a,h)=>T((s(),u(b,{clickable:"",key:h,onClick:L=>y(j)(a.id)},{default:r(()=>[o(x,null,{default:r(()=>[D(c(a.name),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[B]])),128))]),_:1})]),_:1})]),_:1},8,["color"])):m.value==2?(s(),u(p,{key:1,color:g.value,class:"myOutLineButtonMid","no-caps":"",label:"Ready To Go",rounded:""},null,8,["color"])):(s(),d("span",$," Ready To Go - ")),o(p,{color:"green-4",label:C.value,disabled:Q.value,size:"sm",round:""},{default:r(()=>[o(G,null,{default:r(()=>[o(k,{style:{"min-width":"100px"}},{default:r(()=>[(s(!0),d(O,null,w(_.value,(a,h)=>T((s(),u(b,{key:h},{default:r(()=>[o(x,null,{default:r(()=>[z("div",q,[D(c(a.name)+" - "+c(a.ship)+" - T"+c(a.entosis)+" ",1),y(A)(a)?(s(),u(p,{key:0,flat:"",class:"q-ml-sm",padding:"none",round:"",color:"warning",icon:"fa-solid fa-trash-can",size:"xs",onClick:L=>y(H)(a.id)},null,8,["onClick"])):S("",!0)])]),_:2},1024)]),_:2},1024)),[[B]])),128))]),_:1})]),_:1})]),_:1},8,["label","disabled"])]))}};export{P as default};
