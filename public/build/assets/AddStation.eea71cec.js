import{u as fe,i as ye,d as be,_ as ge,r as i,c as d,h as k,e as _e,n as C,m as _,C as S,f as l,w as u,q as $,aD as y,Q as A,aE as Y,l as n,v as D,j as x,A as xe,z as we,ah as ke,G as F}from"./app.10579c01.js";import{Q as Ce,a as z}from"./QTabPanels.1a4b62ce.js";import{Q as E}from"./QSelect.32be28f9.js";import{Q as G}from"./QSeparator.0566634d.js";import{Q as Se}from"./QOptionGroup.2acbdfed.js";import{Q as Ve}from"./QImg.fef93354.js";import"./QItemLabel.1f7b55df.js";import"./QRadio.4f3e8d58.js";import"./use-checkbox.45f82c4c.js";import"./QCheckbox.bf3f01de.js";import"./QToggle.a02dc2d0.js";const Te="/build/assets/info.a6adef34.png",Qe={class:"q-pa-none"},Ne=x("img",{src:"https://i.imgur.com/1ASFxRr.gif"},null,-1),qe=x("div",{class:"text-h6 text-center"},"Enter Structure Name",-1),Ae={class:"no-margin"},De={class:"row"},Fe={class:"col-6"},Le={class:"col-6 flex justify-center"},he=x("span",{class:"text-subtitle1 text-bold"}," Timer Type",-1),Ue=x("span",{class:"text-subtitle1 text-bold"}," Image Link",-1),He={__name:"AddStation",props:{from:{type:Number,default:1},station:{type:Object,required:!1}},emits:["missingCorpDone"],setup(H,{emit:je}){const o=H;let s=fe();ye("can");const W=be(()=>ge(()=>import("./AddMissingCorp.655d9fc6.js"),["assets/AddMissingCorp.655d9fc6.js","assets/app.10579c01.js","assets/app.4fce15f2.css"]));let J=i(Te),V=i(!1),w=i("addName"),r=i(null),p=i(),m=i(),b=i({}),g=i(),c=i(""),f=i(),v=i(),T=i(),K=i([{label:"Anchoring",value:14},{label:"Armor",value:5},{label:"Hull",value:13}]),X=async()=>{o.from==2&&(w.value="details",v.value=3,m.value={text:o.station.corp.ticker,value:o.station.corp_id},p.value={text:o.station.system.system_name,value:o.station.system_id},f.value={text:o.station.item.item_name,value:o.station.item_id},r.value=o.station.name,T.value=o.station.id),o.from==3&&(w.value="details",v.value=4,m.value={text:o.station.corp.ticker,value:o.station.corp_id},p.value={text:o.station.system.system_name,value:o.station.system_id},f.value={text:o.station.item.item_name,value:o.station.item_id},r.value=o.station.name,T.value=o.station.id,c.value=Z(),b.value=o.station.status.id,g.value=o.station.timer_image_link),await s.getSystemList(),await s.getTickList(),await s.getStructureList()},Z=()=>o.station.out_time.replace(/-/g,"."),ee=()=>{w.value="addName",r.value=null,p.value=null,m.value=null,b.value={},g.value=null,c.value="",f.value=null,v.value=null,T.value=null},L=i(),h=d(()=>L.value?s.structurelist.filter(a=>a.text.toLowerCase().indexOf(L.value)>-1):s.structurelist),te=(a,e,t)=>{e(()=>{L.value=a.toLowerCase(),h.value.length>0&&a&&(f.value=h.value[0])})},U=i(),j=d(()=>U.value?s.systemlist.filter(a=>a.text.toLowerCase().indexOf(U.value)>-1):s.systemlist),le=(a,e,t)=>{e(()=>{U.value=a.toLowerCase(),j.value.length>0&&a&&(p.value=j.value[0])})},Q=i(),N=d(()=>Q.value?s.ticklist.filter(a=>a.text.toLowerCase().indexOf(Q.value)>-1):s.ticklist),ae=(a,e,t)=>{e(()=>{Q.value=a.toLowerCase(),N.value.length>0&&a&&(m.value=N.value[0])})},oe=async()=>{await s.getTickList(),Q.value=[],m.value={text:s.missingCorpTick,value:s.missingCorpID}},ue=d(()=>N.value.length==0),ie=d(()=>v.value==2),ne=async()=>{var a={stationName:r.value};await axios({method:"put",url:"api/stationname",withCredentials:!0,data:a,headers:{Accept:"application/json","Content-Type":"application/json"}}).then(e=>{let t=e.data;t.state==2&&(v.value=2,w.value="details"),t.state==3&&(v.value=3,m.value={text:t.corp_ticker,value:t.corp_id},p.value={text:t.system_name,value:t.system_id},f.value={text:t.structure_name,value:t.structure_id},r.value=t.station_name,T.value=t.station_id,w.value="details")})},R=()=>v.value==3,re=()=>v.value!=4,se=d(()=>!!(M.value&&(!q.value||!I.value))),M=d(()=>c.value.length==19),q=d(()=>/^\d{4}\.\d{2}\.\d{2} \d{2}:\d{2}:\d{2}$/.test(c.value)),I=d(()=>{if(q.value){const a=Date.now(),e=a+5*24*60*60*1e3,P=new Date(c.value).getTime();return P>=a&&P<=e}return!1}),de=d(()=>{if(!q.value)return"Format is incorrect";if(!I.value)return"Make sure the date is correct"}),O=d(()=>!!(M.value&&q.value&&I.value&&p.value&&m.value&&b.value>0&&g.value&&f.value)),me=d(()=>!r.value),B=()=>{v.value==2&&ve(),v.value==3&&pe(),v.value==4&&ce()},ve=async()=>{const a=c.value.replace(/\./g,"-");var e={name:r.value,system_id:p.value.value,corp_id:m.value.value,item_id:f.value.value,station_status_id:b.value,out_time:a,timer_image_link:g.value};await axios({method:"put",url:"api/stationnew",withCredentials:!0,data:e,headers:{Accept:"application/json","Content-Type":"application/json"}})},pe=async()=>{const a=c.value.replace(/\./g,"-");var e={station_status_id:b.value,out_time:a,timer_image_link:g.value};await axios({method:"put",url:"api/timer/addTimer/"+T.value,withCredentials:!0,data:e,headers:{Accept:"application/json","Content-Type":"application/json"}})},ce=async()=>{const a=c.value.replace(/\./g,"-");var e={name:r.value,system_id:p.value.value,corp_id:m.value.value,item_id:f.value.value,station_status_id:b.value,out_time:a,timer_image_link:g.value};await axios({method:"put",url:"api/timer/editStation/"+o.station.id,withCredentials:!0,data:e,headers:{Accept:"application/json","Content-Type":"application/json"}})};return(a,e)=>(k(),_e("div",Qe,[o.from==1?(k(),C(_,{key:0,color:"primary",icon:"fa-solid fa-plus",label:"Add Timer",onClick:e[0]||(e[0]=t=>V.value=!0)})):S("",!0),o.from==2?(k(),C(_,{key:1,color:"primary",icon:"fa-solid fa-clock",round:"",padding:"none",flat:"",onClick:e[1]||(e[1]=t=>V.value=!0)})):S("",!0),o.from==3?(k(),C(_,{key:2,color:"primary",icon:"fa-solid fa-pen-to-square",round:"",padding:"none",flat:"",onClick:e[2]||(e[2]=t=>V.value=!0)})):S("",!0),l(ke,{class:"myRoundTop",onBeforeShow:e[16]||(e[16]=t=>n(X)()),"max-width":"700px",modelValue:V.value,"onUpdate:modelValue":e[17]||(e[17]=t=>V.value=t),persistent:"",onBeforeHide:e[18]||(e[18]=t=>n(ee)())},{default:u(()=>[l($,{class:"myRoundTop","max-width":"700px"},{default:u(()=>[l(Ce,{modelValue:w.value,"onUpdate:modelValue":e[15]||(e[15]=t=>w.value=t),animated:"",class:"shadow-2 rounded-borders myStationPannel"},{default:u(()=>[l(z,{class:"q-pa-none",name:"addName"},{default:u(()=>[l($,{class:"my-card",flat:""},{default:u(()=>[Ne,l(y,null,{default:u(()=>[qe]),_:1}),l(y,null,{default:u(()=>[l(A,{modelValue:r.value,"onUpdate:modelValue":e[3]||(e[3]=t=>r.value=t),type:"text",label:"Structure Name",rounded:"","label-color":"webway",standout:""},null,8,["modelValue"])]),_:1}),l(Y,{horizontal:"",align:"right"},{default:u(()=>[l(_,{rounded:"",color:"primary",disable:me.value,label:"Submit",onClick:e[4]||(e[4]=t=>n(ne)())},null,8,["disable"]),D(l(_,{rounded:"",color:"negative",label:"Close"},null,512),[[F]])]),_:1})]),_:1})]),_:1}),l(z,{class:"q-pa-none myRoundTop",name:"details"},{default:u(()=>[l($,{class:"myRoundTop",flat:""},{default:u(()=>[l(y,{class:"bg-primary text-center"},{default:u(()=>[x("h5",Ae,"Enter Details for "+xe(r.value),1)]),_:1}),l(y,{class:"q-py-xs"},{default:u(()=>[l(A,{modelValue:r.value,"onUpdate:modelValue":e[5]||(e[5]=t=>r.value=t),type:"text",label:"Structure Name","label-color":"webway",rounded:"",outlined:"","hide-bottom-space":"",standout:"",readonly:n(re)()},null,8,["modelValue","readonly"])]),_:1}),l(y,{class:"q-py-xs"},{default:u(()=>[l(E,{modelValue:f.value,"onUpdate:modelValue":e[6]||(e[6]=t=>f.value=t),options:h.value,autofocus:ie.value,"option-value":"value","option-label":"text",label:"Structure Type",rounded:"",outlined:"","use-input":"",clearable:"",onFilter:n(te),readonly:n(R)()},null,8,["modelValue","options","autofocus","onFilter","readonly"])]),_:1}),l(y,{class:"q-py-xs"},{default:u(()=>[x("div",De,[x("div",Fe,[l(E,{modelValue:p.value,"onUpdate:modelValue":e[7]||(e[7]=t=>p.value=t),options:j.value,"option-value":"value","option-label":"text",label:"System Name",outlined:"",rounded:"","use-input":"",clearable:"",onFilter:n(le),readonly:n(R)()},null,8,["modelValue","options","onFilter","readonly"])]),x("div",Le,[l(E,{modelValue:m.value,"onUpdate:modelValue":e[8]||(e[8]=t=>m.value=t),options:N.value,"option-value":"value","option-label":"text",label:"Corp Ticker",outlined:"",rounded:"","use-input":"",clearable:"",onFilter:n(ae),readonly:n(R)()},null,8,["modelValue","options","onFilter","readonly"]),ue.value?(k(),C(n(W),{key:0,class:"pt-3 pl-1",onMissingCorpDone:e[9]||(e[9]=t=>n(oe)())})):S("",!0)])])]),_:1}),l(G,{inset:"",color:"webway"}),l(y,null,{default:u(()=>[he,l(Se,{modelValue:b.value,"onUpdate:modelValue":e[10]||(e[10]=t=>b.value=t),color:"secondary",options:K.value,inline:""},null,8,["modelValue","options"])]),_:1}),l(G,{inset:"",color:"webway"}),l(y,null,{default:u(()=>[Ue,l(Ve,{src:J.value,alt:"My Image"},null,8,["src"]),l(A,{class:"q-pt-xs",modelValue:g.value,"onUpdate:modelValue":e[11]||(e[11]=t=>g.value=t),type:"text",label:"Selected Items Screen Shot",rounded:"","hide-bottom-space":"",outlined:"","label-color":"webway",standout:""},null,8,["modelValue"])]),_:1}),l(y,{class:"q-pt-none q-pb-none"},{default:u(()=>[we(" Enter Reinforced Until Timer enter "),l(A,{modelValue:c.value,"onUpdate:modelValue":e[12]||(e[12]=t=>c.value=t),mask:"####.##.## ##:##:##",type:"text","error-message":de.value,ref:"fieldRef",label:"Reinforced unit YYYY.MM.DD hh:mm:ss",rounded:"",outlined:"",error:se.value,"label-color":"webway",standout:""},null,8,["modelValue","error-message","error"])]),_:1}),l(Y,{align:"right"},{default:u(()=>[o.from!=3?D((k(),C(_,{key:0,disable:!O.value,color:"positive",label:"Submit",onClick:e[13]||(e[13]=t=>n(B)()),rounded:""},null,8,["disable"])),[[F]]):S("",!0),o.from==3?D((k(),C(_,{key:1,disable:!O.value,color:"positive",label:"Update",onClick:e[14]||(e[14]=t=>n(B)()),rounded:""},null,8,["disable"])),[[F]]):S("",!0),D(l(_,{label:"Close",rounded:"",color:"negative"},null,512),[[F]])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]))}};export{He as default};
