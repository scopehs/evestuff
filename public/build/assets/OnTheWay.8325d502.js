import{i as z,u as G,c as l,h as s,e as d,n as o,w as n,f as i,s as g,F as k,t as w,v as T,x as W,l as y,y as b,z as x,A as c,p as D,m as p,j as S,C as F,G as B}from"./app.10579c01.js";const R={class:"row flex-center"},$={key:2},q={class:"row"},P={__name:"OnTheWay",props:{item:Object,operationID:Number},setup(I){const r=I;let j=z("can");const u=G();let A=async e=>{var t={user_status_id:2,system_id:r.item.id};await axios({method:"put",url:"/api/onthewayreadytogo/"+r.operationID+"/"+e,data:t,withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}})},H=e=>!!(j("campaigns_admin_access")||u.user_id==e.user_id),N=e=>{var t={user_status_id:1,system_id:null};axios({method:"put",url:"/api/onthewayreadytogo/"+r.operationID+"/"+e,data:t,withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}})},m=l(()=>Q.value>0?L.value>0?1:2:0),v=l(()=>{var e=u.getOwnHackingCharOnOpAllHackers(r.operationID);return e||[]}),Q=l(()=>v.value?v.value.length:0),h=l(()=>{var e=u.getOwnHackingCharOnOpAllHackers(r.operationID);return e&&(e=e.filter(t=>t.user_status_id!=4),e=e.filter(t=>t.system_id==r.item.id?t.user_status_id!=2:!0)),e||[]}),L=l(()=>h.value?h.value.length:0),f=l(()=>u.getOpUsersOnTheWayAll.filter(e=>e.system_id==r.item.id)),O=l(()=>f.value?f.value.length:0),M=l(()=>O.value==0),C=l(()=>{var e=u.getOwnHackingCharOnOp(r.operationID);if(e)var t=e.filter(a=>a.system_id==r.item.id&&a.user_status_id==2).length;else var t=0;return t>0?"green":"red"});return(e,t)=>(s(),d("div",R,[m.value==1?(s(),o(p,{key:0,color:C.value,class:"myOutLineButtonMid","no-caps":"",label:"On The Way",rounded:""},{default:n(()=>[i(D,null,{default:n(()=>[i(g,{style:{"min-width":"100px"}},{default:n(()=>[(s(!0),d(k,null,w(h.value,(a,_)=>T((s(),o(W,{clickable:"",key:_,onClick:V=>y(A)(a.id)},{default:n(()=>[i(b,null,{default:n(()=>[x(c(a.name),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[B]])),128))]),_:1})]),_:1})]),_:1},8,["color"])):m.value==2?(s(),o(p,{key:1,color:C.value,class:"myOutLineButtonMid","no-caps":"",label:"On The Way",rounded:""},null,8,["color"])):(s(),d("span",$," On The Way - ")),i(p,{color:"green-4",label:O.value,disabled:M.value,size:"sm",round:""},{default:n(()=>[i(D,null,{default:n(()=>[i(g,{style:{"min-width":"100px"}},{default:n(()=>[(s(!0),d(k,null,w(f.value,(a,_)=>T((s(),o(W,{key:_},{default:n(()=>[i(b,null,{default:n(()=>[S("div",q,[x(c(a.name)+" - "+c(a.ship)+" - T"+c(a.entosis)+" ",1),y(H)(a)?(s(),o(p,{key:0,flat:"",class:"q-ml-sm",padding:"none",round:"",color:"warning",icon:"fa-solid fa-trash-can",size:"xs",onClick:V=>y(N)(a.id)},null,8,["onClick"])):F("",!0)])]),_:2},1024)]),_:2},1024)),[[B]])),128))]),_:1})]),_:1})]),_:1},8,["label","disabled"])]))}};export{P as default};
