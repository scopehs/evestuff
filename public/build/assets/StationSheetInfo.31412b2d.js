import{u as P,ay as E,i as G,r as h,c as f,h as o,e as g,j as c,f as m,l as d,m as p,w as a,q as H,aD as F,A as C,z as r,B as J,C as s,n,aB as K,D as W,aE as X,v as Z,ah as ee,F as te,G as ae}from"./app.10579c01.js";import{a as i}from"./QSelect.32be28f9.js";import{Q as oe}from"./QTd.f19052d1.js";import{Q as se}from"./QTable.4d294d9e.js";import{c as le}from"./copy-to-clipboard.6e15cb25.js";import"./QItemLabel.1f7b55df.js";import"./QSeparator.0566634d.js";import"./QMarkupTable.d2f16f87.js";import"./QLinearProgress.84b4c331.js";import"./QCheckbox.bf3f01de.js";import"./use-checkbox.45f82c4c.js";const ne={class:"no-margin"},re={class:"column"},ie={class:"row justify-between"},ue={class:"co-autol"},de={key:0,class:"col-auto"},ce={key:0},me={key:1},fe=["src"],xe={__name:"StationSheetInfo",props:{station:Object},setup(R){const e=R;let x=P();const q=E();let b=G("can"),M=h({sortBy:"slot_value",descending:!0,page:1,rowsPerPage:0}),B=h(!1),S=()=>{k.value=!0,N()},D=f(()=>e.station.r_cored==1?"Yes":"No"),T=f(()=>D.value=="Yes"?"text-green":"text-red"),N=()=>{e.station.r_fitted=="Fitted"&&(B.value=!0)},v=()=>B.value==!0,V=f(()=>!!(b("request_recon_task")&&e.station.r_research!=null)),Q=()=>!!e.station.system.task_flag,z=()=>{var l="https://recon.gnf.lt/structures/"+e.station.r_hash+"/view",t=window.open(l,"_blank");t.focus()},I=l=>"https://images.evetech.net/types/"+l.id+"/icon",j=()=>{le(e.station.fit_text).then(()=>{q.notify({type:"info",message:"fit copied to your clipboard"})})},A=()=>{var l={system_name:e.station.system.system_name,system_id:e.station.system_id,station_id:e.station.id,structure_name:e.station.name,username:x.user_name,show_on_main:e.station.show_on_main,show_on_chill:e.show_on_chill};axios({method:"post",url:"api/taskrequest",withCredentials:!0,data:l,headers:{Accept:"application/json","Content-Type":"application/json"}}),q.notify({type:"info",message:"Request Sent"})},O=f(()=>{const l=new Date(e.station.r_updated_at),t=new Date,u=(t.getFullYear()-l.getFullYear())*12,_=t.getMonth()-l.getMonth();return u+_>1}),L=f(()=>{if(e.station.r_updated_at!=null){const l=new Date(e.station.r_updated_at),t=Math.floor((new Date-l)/1e3),u=Math.floor(t/31536e3);if(u>=1)return`${u} year${u===1?"":"s"} ago`;const _=Math.floor(t/2592e3);if(_>=1)return`${_} month${_===1?"":"s"} ago`;const y=Math.floor(t/86400);if(y>=1)return`${y} day${y===1?"":"s"} ago`;const w=Math.floor(t/3600);if(w>=1)return`${w} hour${w===1?"":"s"} ago`;const $=Math.floor(t/60);return $>=1?`${$} minute${$===1?"":"s"} ago`:`${t} second${t===1?"":"s"} ago`}else return"Never"}),U=h([{name:"icon",align:"left",required:!1,label:"",classes:"text-no-wrap q-pa-none",field:l=>l.id,format:l=>`${l}`,sortable:!1},{name:"item",required:!0,align:"left",label:"Items",classes:"text-no-wrap ",field:l=>l.item_name,format:l=>`${l}`,sortable:!1}]),k=h(!1),Y=f(()=>{let l=325;return x.size.height-l+"px"});return(l,t)=>(o(),g(te,null,[c("div",null,[m(p,{color:"primary",icon:"fa-solid fa-circle-info",padding:"none",round:"",flat:"",onClick:t[0]||(t[0]=u=>d(S)())})]),m(ee,{modelValue:k.value,"onUpdate:modelValue":t[5]||(t[5]=u=>k.value=u),persistent:""},{default:a(()=>[m(H,{class:"myRoundTop",style:{width:"500px"}},{default:a(()=>[m(F,{class:"bg-primary text-h5 text-center"},{default:a(()=>[c("span",ne,C(e.station.name),1)]),_:1}),m(F,null,{default:a(()=>[c("div",re,[c("div",null,[c("div",ie,[c("div",ue,[r(" Cored: "),c("strong",{class:J(T.value)},C(D.value),3)]),V.value?(o(),g("div",de,[m(p,{outline:"",rounded:"",class:"myOutLineButton",size:"sm",color:"secondary",label:"View On Recon Tool",onClick:t[1]||(t[1]=u=>d(z)())})])):s("",!0)])]),c("div",null,[r(" Last Updated: "+C(L.value)+" ",1),d(b)("request_recon_task")&&!d(Q)()&&O.value?(o(),n(p,{key:0,outline:"",rounded:"",class:"myOutLineButton",size:"sm",color:"secondary",label:"Request Update",onClick:t[2]||(t[2]=u=>d(A)())})):s("",!0),d(b)("request_recon_task")&&d(Q)()?(o(),n(i,{key:1,outline:"",rounded:"",class:"myOutLineButton",size:"sm",color:"secondary",label:"Request Made"})):s("",!0)]),c("div",null,[d(v)()?(o(),g("div",ce,[e.station.r_anti_cap==1?(o(),n(i,{key:0,small:"",color:"red",class:""},{default:a(()=>[r(" anti cap ")]),_:1})):s("",!0),e.station.r_anti_subcap==1?(o(),n(i,{key:1,small:"",color:"red"},{default:a(()=>[r(" anti subcap ")]),_:1})):s("",!0),e.station.r_dooms_day==1?(o(),n(i,{key:2,small:"",color:"red"},{default:a(()=>[r(" dooms day ")]),_:1})):s("",!0),e.station.r_point_defense==1?(o(),n(i,{key:3,small:"",color:"red"},{default:a(()=>[r(" point defense ")]),_:1})):s("",!0),e.station.r_biochemical==1?(o(),n(i,{key:4,small:"",color:"blue"},{default:a(()=>[r(" biochemical ")]),_:1})):s("",!0),e.station.r_capital_shipyard==1?(o(),n(i,{key:5,small:"",color:"blue"},{default:a(()=>[r(" capital shipyard ")]),_:1})):s("",!0),e.station.r_cloning==1?(o(),n(i,{key:6,small:"",color:"blue"},{default:a(()=>[r(" cloning ")]),_:1})):s("",!0),e.station.r_composite==1?(o(),n(i,{key:7,small:"",color:"blue"},{default:a(()=>[r(" composite ")]),_:1})):s("",!0),e.station.r_guide_bombs==1?(o(),n(i,{key:8,small:"",color:"red"},{default:a(()=>[r(" guide bombs ")]),_:1})):s("",!0),e.station.r_hyasyoda==1?(o(),n(i,{key:9,small:"",color:"blue"},{default:a(()=>[r(" hyasyoda ")]),_:1})):s("",!0),e.station.r_hybrid==1?(o(),n(i,{key:10,small:"",color:"blue"},{default:a(()=>[r(" hybrid ")]),_:1})):s("",!0),e.station.r_invention==1?(o(),n(i,{key:11,small:"",color:"blue"},{default:a(()=>[r(" invention ")]),_:1})):s("",!0),e.station.r_manufacturing==1?(o(),n(i,{key:12,small:"",color:"blue"},{default:a(()=>[r(" manufacturing ")]),_:1})):s("",!0),e.station.r_moon_drilling==1?(o(),n(i,{key:13,small:"",color:"blue"},{default:a(()=>[r(" moon drilling ")]),_:1})):s("",!0),e.station.r_reprocessing==1?(o(),n(i,{key:14,small:"",color:"blue"},{default:a(()=>[r(" reprocessing ")]),_:1})):s("",!0),e.station.r_research==1?(o(),n(i,{key:15,small:"",color:"blue"},{default:a(()=>[r(" research ")]),_:1})):s("",!0),e.station.r_supercapital_shipyard==1?(o(),n(i,{key:16,small:"",color:"blue"},{default:a(()=>[r(" supercapital shipyard ")]),_:1})):s("",!0),e.station.r_t2_rigged==1?(o(),n(i,{key:17,small:"",color:"blue"},{default:a(()=>[r(" t2 rigged ")]),_:1})):s("",!0)])):s("",!0),d(v)()?s("",!0):(o(),g("div",me,"No Fit Info"))]),c("div",null,[m(se,{class:"myStationItemsTable myRound bg-webBack",rows:e.station.fit,columns:U.value,"table-class":" text-webway","table-header-class":" text-weight-bolder","row-key":"id","no-data-label":"No Fit",dark:"",style:K({maxHeight:`${Y.value}`}),dense:"",ref:"tableRef",rounded:"",flat:"","hide-bottom":"","hide-header":"",pagination:M.value,"onUpdate:pagination":t[3]||(t[3]=u=>M.value=u)},{"body-cell-icon":a(u=>[m(oe,{class:"q-pa-none",props:u},{default:a(()=>[m(W,{class:"q-pa-none"},{default:a(()=>[c("img",{src:d(I)(u.row),class:"q-pa-none"},null,8,fe)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","style","pagination"])])])]),_:1}),m(X,{align:"between"},{default:a(()=>[d(v)()?(o(),n(p,{key:0,rounded:"",outline:"",color:"info",label:"Copy Fit",onClick:t[4]||(t[4]=u=>d(j)())})):s("",!0),Z(m(p,{color:"negative",label:"Close"},null,512),[[ae]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{xe as default};
