import{u as j,i as N,r as s,c as S,h as f,e as U,n as c,m as r,C,f as l,w as d,q as h,aD as V,z as D,Q as y,aE as T,v as w,l as v,ah as $,G as k}from"./app.10579c01.js";import{Q as E}from"./QOptionGroup.2acbdfed.js";import"./QRadio.4f3e8d58.js";import"./use-checkbox.45f82c4c.js";import"./QCheckbox.bf3f01de.js";import"./QToggle.a02dc2d0.js";const O={__name:"AffilationEditPannel",props:{edit:{type:Boolean,default:!1},item:{type:[Object,Array],required:!1}},setup(p){const t=p;let b=j();N("can");let o=s(!1),i=s(""),n=s(""),u=s(null),A=s([{label:"Blue",value:2},{label:"Red",value:1},{label:"Neutral",value:0}]),Q=async()=>{let m={name:i.value,short_name:n.value,color:u.value};t.edit?await axios({method:"put",withCredentials:!0,data:m,url:"/api/affiliation/"+t.item.id,headers:{Accept:"application/json","Content-Type":"application/json"}}).then(e=>{b.updateAffilation(e.data.affiliation)}):await axios({method:"post",withCredentials:!0,data:m,url:"/api/affiliation",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(e=>{b.updateAffilation(e.data.affiliation)})},B=()=>{t.edit&&(i.value=t.item.name,n.value=t.item.short_name,u.value=t.item.color)},x=S(()=>i.value==""||n.value==""||u.value==null),g=()=>{i.value="",n.value="",u.value=null};return(m,e)=>(f(),U("div",null,[p.edit?C("",!0):(f(),c(r,{key:0,flat:"",color:"warning",icon:"fa-solid fa-plus",label:"Add Affiliation",onClick:e[0]||(e[0]=a=>o.value=!o.value)})),p.edit?(f(),c(r,{key:1,flat:"",size:"sm",color:"secondary",icon:"fa-solid fa-edit",onClick:e[1]||(e[1]=a=>o.value=!o.value)})):C("",!0),l($,{modelValue:o.value,"onUpdate:modelValue":e[5]||(e[5]=a=>o.value=a),persistent:"",onBeforeHide:e[6]||(e[6]=a=>v(g)()),onBeforeShow:e[7]||(e[7]=a=>v(B)())},{default:d(()=>[l(h,{class:"myRoundTop"},{default:d(()=>[l(V,{class:"myCardHeader bg-primary text-h3"},{default:d(()=>[D(" Make a new Affiliation ")]),_:1}),l(V,null,{default:d(()=>[l(y,{modelValue:i.value,"onUpdate:modelValue":e[2]||(e[2]=a=>i.value=a),label:"Name"},null,8,["modelValue"]),l(y,{modelValue:n.value,"onUpdate:modelValue":e[3]||(e[3]=a=>n.value=a),label:"Short Name"},null,8,["modelValue"]),l(E,{modelValue:u.value,"onUpdate:modelValue":e[4]||(e[4]=a=>u.value=a),color:"secondary",options:A.value,inline:""},null,8,["modelValue","options"])]),_:1}),l(T,{align:"between"},{default:d(()=>[w(l(r,{rounded:"",color:"positive",onClick:v(Q),label:t.edit?"Update":"Submit",disable:x.value},null,8,["onClick","label","disable"]),[[k]]),w(l(r,{rounded:"",color:"negative",label:"Close"},null,512),[[k]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{O as default};
