import{u as R,i as $,d as I,_ as G,r as s,o as H,b as X,c as v,h as k,e as z,f as o,m as V,w as n,q as J,aD as d,l as i,j as u,n as K,C as W,aE as Y,v as L,ah as Z,aX as ee,G as A}from"./app.10579c01.js";import{Q as _}from"./QSelect.32be28f9.js";import{Q as te}from"./QOptionGroup.2acbdfed.js";import"./QItemLabel.1f7b55df.js";import"./QRadio.4f3e8d58.js";import"./use-checkbox.45f82c4c.js";import"./QCheckbox.bf3f01de.js";import"./QToggle.a02dc2d0.js";const le={class:"q-pl-md"},oe=u("h5",{class:"no-margin"},"Add Tower",-1),ae={class:"row q-gutter-xs"},ie={class:"col"},se={class:"col"},ne={class:"row flex-center"},ue={class:"col-auto"},re={class:"col-auto"},de=u("span",{class:"text-subtitle1 text-bold"}," Status Type",-1),_e={__name:"AddTower",emits:["missingCorpDone"],setup(pe,{emit:ve}){let a=R();$("can");const h=I(()=>G(()=>import("./AddMissingCorp.655d9fc6.js"),["assets/AddMissingCorp.655d9fc6.js","assets/app.10579c01.js","assets/app.4fce15f2.css"]));let T=s(!1);H(async()=>{await a.getTowerFilter(),await a.getTickList()}),X(async()=>{});let F=()=>{},m=s([]),c=s({}),S=s([{label:"Anchoring",value:3},{label:"Anchored",value:9},{label:"Onine",value:4},{label:"Reffed",value:5}]),f=s(),M=v(()=>f.value?a.towerTypes.filter(t=>t.text.toLowerCase().indexOf(f.value)>-1):a.towerTypes),Q=(t,e,l)=>{e(()=>{f.value=t.toLowerCase()})},b=s([]),w=s(),U=v(()=>w.value?a.systemlist.filter(t=>t.text.toLowerCase().indexOf(w.value)>-1):a.systemlist),O=(t,e,l)=>{e(()=>{w.value=t.toLowerCase()})},x=s([]),y=s(),B=v(()=>y.value?a.moonList.filter(t=>t.text.toLowerCase().indexOf(y.value)>-1):a.moonList),D=(t,e,l)=>{e(()=>{y.value=t.toLowerCase()})},r=s(),p=s(),C=v(()=>p.value?a.ticklist.filter(t=>t.text.toLowerCase().indexOf(p.value)>-1):a.ticklist),q=(t,e,l)=>{e(()=>{p.value=t.toLowerCase(),C.value.length>0&&t&&(r.value=C.value[0])})},j=v(()=>C.value.length==0),g=()=>{a.getMoonList(b.value.value)},E=async()=>{await a.getTickList(),p.value=[],r.value={text:a.missingCorpTick,value:a.missingCorpID}},N=async()=>{var t={corp_id:r.value.value,item_id:m.value.value,moon_id:x.value.value,tower_status_id:c.value};await ee({method:"post",url:"api/towerrecords",withCredentials:!0,data:t,headers:{Accept:"application/json","Content-Type":"application/json"}})},P=()=>{m.value={},c.value=[],f.value=null,b.value=[],w.value=null,x.value=[],y.value=null,r.value=null,p.value=null};return(t,e)=>(k(),z("div",le,[o(V,{color:"primary",label:"Add Tower",onClick:e[0]||(e[0]=l=>T.value=!0)}),o(Z,{class:"myRoundTop","max-width":"700px","min-width":"700px",modelValue:T.value,"onUpdate:modelValue":e[8]||(e[8]=l=>T.value=l),persistent:"",onBeforeHide:e[9]||(e[9]=l=>i(P)())},{default:n(()=>[o(J,{class:"myRoundTop",flat:"",style:{width:"700px","max-width":"80vw"}},{default:n(()=>[o(d,{class:"bg-primary text-center"},{default:n(()=>[oe]),_:1}),o(d,{class:"q-py-xs"},{default:n(()=>[o(_,{modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=l=>m.value=l),options:M.value,"option-value":"value",onFilter:i(Q),onFilterAbort:i(F),"option-label":"text","input-debounce":"0",label:"Structure Type",filled:"",clearable:"","use-input":""},null,8,["modelValue","options","onFilter","onFilterAbort"])]),_:1}),o(d,{class:"q-py-xs"},{default:n(()=>[u("div",ae,[u("div",ie,[o(_,{modelValue:b.value,"onUpdate:modelValue":[e[2]||(e[2]=l=>b.value=l),i(g)],options:U.value,"option-value":"value",onFilter:i(O),onFilterAbort:i(F),"option-label":"text","input-debounce":"0",label:"System Name",filled:"",clearable:"","use-input":""},null,8,["modelValue","options","onFilter","onFilterAbort","onUpdate:modelValue"])]),u("div",se,[o(_,{modelValue:x.value,"onUpdate:modelValue":[e[3]||(e[3]=l=>x.value=l),i(g)],options:B.value,"option-value":"value",onFilter:i(D),onFilterAbort:i(F),"option-label":"text","input-debounce":"0",label:"Moon",filled:"",clearable:"",disable:!(i(a).moonList.length>0),"use-input":""},null,8,["modelValue","options","onFilter","onFilterAbort","disable","onUpdate:modelValue"])])])]),_:1}),o(d,null,{default:n(()=>[u("div",ne,[u("div",ue,[o(_,{modelValue:r.value,"onUpdate:modelValue":e[4]||(e[4]=l=>r.value=l),options:C.value,"option-value":"value","option-label":"text",label:"Corp Ticker","use-input":"",clearable:"",filled:"",onFilter:i(q)},null,8,["modelValue","options","onFilter"])]),u("div",re,[j.value?(k(),K(i(h),{key:0,class:"pt-3 pl-1",onMissingCorpDone:e[5]||(e[5]=l=>i(E)())})):W("",!0)])])]),_:1}),o(d,null,{default:n(()=>[o(d,null,{default:n(()=>[de,o(te,{modelValue:c.value,"onUpdate:modelValue":e[6]||(e[6]=l=>c.value=l),color:"secondary",options:S.value,inline:""},null,8,["modelValue","options"])]),_:1})]),_:1}),o(Y,{align:"center"},{default:n(()=>[L(o(V,{color:"positive",label:"Submit",onClick:e[7]||(e[7]=l=>i(N)()),rounded:""},null,512),[[A]]),L(o(V,{label:"Close",rounded:"",color:"negative"},null,512),[[A]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{_e as default};
