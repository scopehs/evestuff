import{u as Ce,r as u,i as ke,d as k,o as Ve,b as Le,c as d,e as q,f as a,w as n,g as Qe,_ as V,h as p,j as r,Q as Z,k as De,l as s,x as L,aU as U,aV as E,y as v,A as m,D as ee,z as M,C as te,m as Q,p as le,s as Fe,F as Ae,t as Re,v as B,n as D,q as Se,aD as $e,aE as qe,aX as ae,G as O}from"./app.10579c01.js";import{Q as P}from"./QItemLabel.1f7b55df.js";import{Q as j}from"./QToggle.a02dc2d0.js";import{Q as H,a as N}from"./QSelect.32be28f9.js";import{Q as oe}from"./QBtnToggle.445cdb1e.js";import{Q as c}from"./QTd.f19052d1.js";import{Q as Ue}from"./QTr.00779787.js";import{Q as Ee}from"./QTable.4d294d9e.js";import"./use-checkbox.45f82c4c.js";import"./QSeparator.0566634d.js";import"./QMarkupTable.d2f16f87.js";import"./QLinearProgress.84b4c331.js";import"./QCheckbox.bf3f01de.js";const Me={class:"q-ma-md"},Be=r("div",{class:"row full-width flex-center q-pt-xs myRoundTop bg-primary"},[r("div",{class:"col-11 flex flex-center"},[r("span",{class:"text-h4"},"Towers")])],-1),Oe={class:"row full-width q-pt-md justify-between"},Pe={class:"col-12"},je={class:"row q-gutter-sm q-pl-md"},He={class:"col-1"},Ne={class:"col-2"},ze={class:"text-xs"},Ie={class:"col-4"},Ge={class:"text-xs"},Xe={class:"col-4"},Je={class:"text-xs"},Ke={class:"row justify-end q-pt-sm"},We={class:"col"},Ye={class:"col-auto"},Ze=["src"],et={key:0},tt=["src"],lt={class:"row flex-center"},_t={__name:"Towers",setup(at){Qe(e=>({"3b91beed":Te.value}));let f=Ce(),F=u("");ke("can");let y=u(),h=u(),T=u("");k(()=>V(()=>import("./index.96e5e95a.js"),["assets/index.96e5e95a.js","assets/app.10579c01.js","assets/app.4fce15f2.css"]));const ne=k(()=>V(()=>import("./AddTower.33414866.js"),["assets/AddTower.33414866.js","assets/app.10579c01.js","assets/app.4fce15f2.css","assets/QSelect.32be28f9.js","assets/QItemLabel.1f7b55df.js","assets/QOptionGroup.2acbdfed.js","assets/QRadio.4f3e8d58.js","assets/use-checkbox.45f82c4c.js","assets/QCheckbox.bf3f01de.js","assets/QToggle.a02dc2d0.js"])),re=k(()=>V(()=>import("./TowerMessage.4b1b0bfd.js"),["assets/TowerMessage.4b1b0bfd.js","assets/app.10579c01.js","assets/app.4fce15f2.css","assets/QBadge.6984755e.js","assets/QChatMessage.057585fe.js","assets/TowerMessage.f247a9ce.css"])),ie=k(()=>V(()=>import("./TowerFit.3e4e7f32.js"),["assets/TowerFit.3e4e7f32.js","assets/app.10579c01.js","assets/app.4fce15f2.css","assets/QTd.f19052d1.js","assets/QTable.4d294d9e.js","assets/QSeparator.0566634d.js","assets/QMarkupTable.d2f16f87.js","assets/QSelect.32be28f9.js","assets/QItemLabel.1f7b55df.js","assets/QLinearProgress.84b4c331.js","assets/QCheckbox.bf3f01de.js","assets/use-checkbox.45f82c4c.js","assets/TowerFit.46bcb6cb.css"]));Ve(async()=>{document.title="Evestuff - Towers",Echo.private("towers").listen("TowerChanged",e=>{f.updateTowers(e.flag.message)}).listen("TowerNew",e=>{f.getTowerData()}).listen("TowerDelete",e=>{f.deleteTower(e.flag.id)}).listen("TowerSheetMessageUpdate",e=>{f.updateTowers(e.flag.message)}),await f.getTowerData()}),Le(async()=>{Echo.leave("towers")});let se=u({sortBy:"region",descending:!1,page:1,rowsPerPage:0}),ue=u([{title:"New",value:1},{title:"Scouted",value:2},{title:"Online",value:4},{title:"Reffed",value:5},{title:"Anchored",value:9},{title:"Anchoring",value:3},{title:"Dead",value:6}]),de=e=>{if(e==1)return"webway";if(e==2)return"secondary";if(e==3)return"warning";if(e==4)return"primary";if(e==5||e==6)return"negative";if(e==7)return"orange";if(e==8)return"warning";if(e==9)return"teal"},z=e=>!(e.fit.length>0),me=async e=>{var o={text:T.value};await ae({method:"post",withCredentials:!0,data:o,url:"/api/tower/addfit/"+e,headers:{Accept:"application/json","Content-Type":"application/json"}}).then(l=>{T.value=""})},ce=e=>ue.value.filter(l=>l.value!=e),fe=(e,o)=>{var l={status_id:o};ae({method:"put",url:"api/tower/updatestatus/"+e,withCredentials:!0,data:l,headers:{Accept:"application/json","Content-Type":"application/json"}})},I=d(()=>b.value.length>0?f.towers.filter(o=>b.value.some(l=>l.value===o.moon.region_id)):f.towers),G=d(()=>g.value.length>0?I.value.filter(o=>g.value.some(l=>l.value===o.moon.constellation_id)):I.value),w=d(()=>C.value.length>0?G.value.filter(o=>C.value.some(l=>l.value===o.item_id)):G.value),X=d(()=>y.value?y.value==1?w.value.filter(e=>e.corp.alliance_id?e.corp.alliance.standing<=0:e.corp.standing<=0):w.value.filter(e=>e.corp.alliance_id?e.corp.alliance.standing>0:e.corp.standing>0):w.value),pe=d(()=>h.value?X.value.filter(e=>e.status.id==h.value):X.value),ve=d(()=>pe.value),b=u([]),A=u(),J=d(()=>{var e=w.value.map(t=>({id:t.moon.region.id,name:t.moon.region.region_name}));const o=[],l=new Map;for(const t of e)l.has(t.id)||(l.set(t.id,!0),o.push({value:t.id,text:t.name}));return o.sort((t,i)=>t.text.localeCompare(i.text)),o}),we=d(()=>A.value?J.value.filter(e=>e.text.toLowerCase().indexOf(A.value)>-1):J.value),_e=(e,o,l)=>{o(()=>{A.value=e.toLowerCase()})},g=u([]),R=u(),K=d(()=>{var e=w.value.map(t=>({id:t.moon.constellation.id,name:t.moon.constellation.constellation_name}));const o=[],l=new Map;for(const t of e)l.has(t.id)||(l.set(t.id,!0),o.push({value:t.id,text:t.name}));return o.sort((t,i)=>t.text.localeCompare(i.text)),o}),be=d(()=>R.value?K.value.filter(e=>e.text.toLowerCase().indexOf(R.value)>-1):K.value),ge=(e,o,l)=>{o(()=>{R.value=e.toLowerCase()})},C=u([]),S=u(),W=d(()=>{var e=w.value.map(t=>({id:t.item.id,type:t.item.item_name}));const o=[],l=new Map;for(const t of e)l.has(t.id)||(l.set(t.id,!0),o.push({value:t.id,text:t.type}));return o.sort((t,i)=>t.text.localeCompare(i.text)),o}),xe=d(()=>S.value?W.value.filter(e=>e.text.toLowerCase().indexOf(S.value)>-1):W.value),ye=(e,o,l)=>{o(()=>{S.value=e.toLowerCase()})},$=()=>{},he=u([{name:"region",align:"left",required:!1,label:"Region",classes:"text-no-wrap",field:e=>e.moon.region.region_name,format:e=>`${e}`,sortable:!1},{name:"constellation",required:!0,align:"left",label:"Constellation",classes:"text-no-wrap",field:e=>e.moon.constellation.constellation_name,format:e=>`${e}`,sortable:!0,filter:!0},{name:"system",required:!0,align:"left",label:"System",classes:"text-no-wrap",field:e=>e.moon.system.system_name,format:e=>`${e}`,sortable:!0,filter:!0},{name:"corpTicker",align:"left",classes:"text-no-wrap",label:"Corp",field:e=>e.corp.ticker,format:e=>`${e}`,sortable:!0,filter:!0},{name:"allianceTicker",align:"left",required:!0,label:"Alliance",classes:"text-no-wrap",field:e=>e.corp.alliance?e.corp.alliance.ticker:null,format:e=>`${e}`,sortable:!0,filter:!0},{name:"moon",align:"left",classes:"text-no-wrap",label:"Moon",field:e=>e.moon.name,format:e=>`${e}`,sortable:!0,filter:!0},{name:"type",label:"Type",align:"left",classes:"text-no-wrap",field:e=>e.item.item_name,format:e=>`${e}`,sortable:!0,filter:!0},{name:"status",label:"Status",classes:"text-no-wrap",align:"center",sortable:!0,field:e=>e.status.name,format:e=>`${e}`},{name:"actions",label:"",align:"right",classes:"text-no-wrap",sortable:!1,field:e=>e.id,format:e=>`${e}`},{name:"editedBy",label:"Edited By",classes:"text-no-wrap",align:"right",sortable:!0,field:e=>e.user.name,format:e=>`${e}`}]),Te=d(()=>{let e=30;return f.size.height-e+"px"});return(e,o)=>(p(),q("div",Me,[a(Ee,{title:"Connections",class:"myTablePoS myRound bg-webBack",rows:ve.value,columns:he.value,"table-class":" text-webway","table-header-class":" text-weight-bolder","row-key":"id","no-data-label":"All Hostile Stations our reffed!!!!!!",dark:"",dense:"",filter:F.value,ref:"tableRef",rounded:"","hide-bottom":"",pagination:se.value},{top:n(l=>[Be,r("div",Oe,[r("div",Pe,[r("div",je,[r("div",He,[a(Z,{rounded:"",standout:"",dense:"",debounce:"300",modelValue:F.value,"onUpdate:modelValue":o[0]||(o[0]=t=>F.value=t),clearable:"",placeholder:"Search"},{append:n(()=>[a(De,{name:"fa-solid fa-magnifying-glass"})]),_:1},8,["modelValue"])]),r("div",Ne,[a(H,{rounded:"",dense:"",clearable:"",standout:"","input-debounce":"0","label-color":"webway","option-value":"value","option-label":"text",modelValue:b.value,"onUpdate:modelValue":o[1]||(o[1]=t=>b.value=t),options:we.value,ref:"toRegionRef",label:"Region",onClear:o[2]||(o[2]=t=>b.value=[]),onFilter:s(_e),onFilterAbort:s($),"map-options":"","use-input":"","use-chips":"",multiple:"","input-style":" max-width: 10px; min-width: 10px"},{option:n(({itemProps:t,opt:i,selected:_,toggleOption:x})=>[a(L,U(E(t)),{default:n(()=>[a(v,null,{default:n(()=>[a(P,{innerHTML:i.text},null,8,["innerHTML"])]),_:2},1024),a(v,{side:""},{default:n(()=>[a(j,{"model-value":_,"onUpdate:modelValue":Y=>x(i)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),"selected-item":n(t=>[a(N,{removable:"",onRemove:i=>t.removeAtIndex(t.index),tabindex:t.tabindex,"text-color":"white",class:"q-ma-none",color:"webChip"},{default:n(()=>[r("span",ze,m(t.opt.text),1)]),_:2},1032,["onRemove","tabindex"])]),_:1},8,["modelValue","options","onFilter","onFilterAbort"])]),r("div",Ie,[a(H,{rounded:"",clearable:"",dense:"",standout:"","input-debounce":"0","label-color":"webway","option-value":"value","option-label":"text",modelValue:g.value,"onUpdate:modelValue":o[3]||(o[3]=t=>g.value=t),options:be.value,ref:"toConstellationRef",label:"Constellations",onClear:o[4]||(o[4]=t=>g.value=[]),onFilter:s(ge),onFilterAbort:s($),"map-options":"","use-input":"","use-chips":"",multiple:"","input-style":" max-width: 10px; min-width: 10px"},{option:n(({itemProps:t,opt:i,selected:_,toggleOption:x})=>[a(L,U(E(t)),{default:n(()=>[a(v,null,{default:n(()=>[a(P,{innerHTML:i.text},null,8,["innerHTML"])]),_:2},1024),a(v,{side:""},{default:n(()=>[a(j,{"model-value":_,"onUpdate:modelValue":Y=>x(i)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),"selected-item":n(t=>[a(N,{removable:"",onRemove:i=>t.removeAtIndex(t.index),tabindex:t.tabindex,"text-color":"white",class:"q-ma-none",color:"webChip"},{default:n(()=>[r("span",Ge,m(t.opt.text),1)]),_:2},1032,["onRemove","tabindex"])]),_:1},8,["modelValue","options","onFilter","onFilterAbort"])]),r("div",Xe,[a(H,{rounded:"",clearable:"",dense:"",standout:"","input-debounce":"0","label-color":"webway","option-value":"value","option-label":"text",modelValue:C.value,"onUpdate:modelValue":o[5]||(o[5]=t=>C.value=t),options:xe.value,ref:"typeRef",label:"Type",onFilter:s(ye),onFilterAbort:s($),"map-options":"","use-input":"","use-chips":"",multiple:"","input-style":" max-width: 10px; min-width: 10px"},{option:n(({itemProps:t,opt:i,selected:_,toggleOption:x})=>[a(L,U(E(t)),{default:n(()=>[a(v,null,{default:n(()=>[a(P,{innerHTML:i.text},null,8,["innerHTML"])]),_:2},1024),a(v,{side:""},{default:n(()=>[a(j,{"model-value":_,"onUpdate:modelValue":Y=>x(i)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),"selected-item":n(t=>[a(N,{removable:"",onRemove:i=>t.removeAtIndex(t.index),tabindex:t.tabindex,"text-color":"white",class:"q-ma-none",color:"webChip"},{default:n(()=>[r("span",Je,m(t.opt.text),1)]),_:2},1032,["onRemove","tabindex"])]),_:1},8,["modelValue","options","onFilter","onFilterAbort"])])]),r("div",Ke,[r("div",We,[a(s(ne))]),r("div",Ye,[a(oe,{modelValue:y.value,"onUpdate:modelValue":o[6]||(o[6]=t=>y.value=t),rounded:"",unelevated:"",class:"q-pr-md",clearable:"",color:"webDark","text-color":"gray","toggle-color":"primary","toggle-text-color":"gray",options:[{label:"Hostile",value:1},{label:"Friendly",value:2}]},null,8,["modelValue"]),a(oe,{modelValue:h.value,"onUpdate:modelValue":o[7]||(o[7]=t=>h.value=t),rounded:"",unelevated:"",clearable:"",color:"webDark","text-color":"gray","toggle-color":"primary","toggle-text-color":"gray",options:[{label:"Scouting",value:2},{label:"Anchoring",value:3},{label:"Online",value:4},{label:"Reffed",value:5},{label:"Dead",value:6}]},null,8,["modelValue"])])])])])]),body:n(l=>[a(Ue,{props:l},{default:n(()=>[a(c,{key:"region",props:l},{default:n(()=>[r("div",null,m(l.row.moon.region.region_name),1)]),_:2},1032,["props"]),a(c,{key:"constellation",props:l},{default:n(()=>[r("div",null,m(l.row.moon.constellation.constellation_name),1)]),_:2},1032,["props"]),a(c,{key:"system",props:l},{default:n(()=>[r("div",null,m(l.row.moon.system.system_name),1)]),_:2},1032,["props"]),a(c,{key:"corpTicker",props:l},{default:n(()=>[r("div",null,[a(ee,{size:"md",class:"q-pa-none"},{default:n(()=>[r("img",{src:l.row.corp.url},null,8,Ze)]),_:2},1024),M(" "+m(l.row.corp.ticker),1)])]),_:2},1032,["props"]),a(c,{props:l,key:"allianceTicker"},{default:n(()=>[l.row.corp.alliance?(p(),q("div",et,[a(ee,{size:"md",class:"q-pa-none"},{default:n(()=>[r("img",{src:l.row.corp.alliance.url},null,8,tt)]),_:2},1024),M(" "+m(l.row.corp.alliance.ticker),1)])):te("",!0)]),_:2},1032,["props"]),a(c,{key:"moon",props:l},{default:n(()=>[r("div",null,m(l.row.moon.name),1)]),_:2},1032,["props"]),a(c,{key:"type",props:l},{default:n(()=>[r("div",null,m(l.row.item.item_name),1)]),_:2},1032,["props"]),a(c,{key:"status",props:l},{default:n(()=>[r("div",null,[a(Q,{class:"myOutLineButtonLarge",color:s(de)(l.row.status.id),size:"md",rounded:"",label:l.row.status.name},{default:n(()=>[a(le,null,{default:n(()=>[a(Fe,{style:{"min-width":"100px"}},{default:n(()=>[(p(!0),q(Ae,null,Re(s(ce)(l.row.status.id),(t,i)=>B((p(),D(L,{key:i,onClick:_=>s(fe)(l.row.id,t.value),clickable:""},{default:n(()=>[a(v,null,{default:n(()=>[M(m(t.title),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[O]])),128))]),_:2},1024)]),_:2},1024)]),_:2},1032,["color","label"])])]),_:2},1032,["props"]),a(c,{key:"actions",props:l},{default:n(()=>[r("div",lt,[a(s(re),{class:"q-pr-lg",tower:l.row,type:4},null,8,["tower"]),s(z)(l.row)?(p(),D(Q,{key:0,class:"myOutLineButtonLarge",outline:s(z)(l.row),rounded:"",color:"accent",label:"Fit"},{default:n(()=>[a(le,null,{default:n(()=>[a(Se,{class:"my-card",style:{width:"20vw"}},{default:n(()=>[a($e,null,{default:n(()=>[a(Z,{modelValue:T.value,"onUpdate:modelValue":o[8]||(o[8]=t=>T.value=t),type:"textarea",label:"Paste The Dscan of the fit here"},null,8,["modelValue"])]),_:1}),a(qe,{align:"between"},{default:n(()=>[l.row.dscan_id?te("",!0):B((p(),D(Q,{key:0,rounded:"",color:"primary",label:"Submit",onClick:t=>s(me)(l.row.id)},null,8,["onClick"])),[[O]]),B(a(Q,{rounded:"",color:"negative",label:"close"},null,512),[[O]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["outline"])):(p(),D(s(ie),{key:1,tower:l.row},null,8,["tower"]))])]),_:2},1032,["props"]),a(c,{key:"editedBy",props:l},{default:n(()=>[r("div",null,m(l.row.user.name),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter","pagination"])]))}};export{_t as default};
