import{u as be,r,c as p,h as f,e as b,f as o,w as n,aD as F,j as s,A as d,m,F as P,t as z,z as A,C as X,q as G,v as I,l as a,Q as Fe,aE as J,ah as K,p as ye,s as Ce,n as xe,y as _e,x as we,aX as R,G as k}from"./app.10579c01.js";import{Q as he}from"./QTooltip.8710fb11.js";import{Q as _}from"./QSelect.32be28f9.js";import{Q as ge}from"./QSeparator.0566634d.js";import"./QItemLabel.1f7b55df.js";const Ve={class:"no-margin text-h6 q-ma-none"},Ie={class:"column items-center"},Re={class:"text-webway q-pa-none"},ke={class:"text-webway q-pa-none"},Ae={class:"text-webway q-pa-none"},Le={class:"text-webway q-pa-none"},Te={class:"column items-center"},De={key:0},Qe={key:0},qe=s("br",null,null,-1),Ue={class:"no-margin text-h6 q-ma-none"},Be={class:"column q-gutter-lg"},je={class:"no-margin text-h6 q-ma-none"},Ne={class:"row full-width items-center"},Me={class:"col-5"},Se={class:"col-5"},$e={class:"col-2 q-pl-xs"},Ee={class:"column"},Je={__name:"OperationInfoFleetSoloCard",props:{fleet:[Array,Object]},setup(C){const i=C;let u=be(),L=r(!1),T=r(!1),v=r(),c=r(),w=r(),h=r(),g=r(),y=r(),x=r();r();let W=()=>{v.value=i.fleet.fc,c.value=i.fleet.boss,w.value=i.fleet.doctrine,h.value=i.fleet.mumble,g.value=i.fleet.name},Y=()=>{var l=null,e=null;ne.value=="string"?l=v.value:v.value&&(l=v.value.name),ae.value=="string"?e=c.value:c.value&&(e=c.value.name);var t={fleet_name:g.value,fc_name:l,boss_name:e,doctrine_id:w.value,mumble_id:h.value,opID:u.operationInfoPage.id};R({method:"put",url:"/api/operationinfo/fleet/update/"+i.fleet.id,withCredentials:!0,data:t,headers:{Accept:"application/json","Content-Type":"application/json"}})},Z=()=>{R({method:"delete",url:"/api/operationinfofleet/"+i.fleet.id,withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}})},ee=p(()=>i.fleet.fc_id?i.fleet.fc.name:"None"),te=p(()=>i.fleet.boss_id?i.fleet.boss.name:"None"),le=p(()=>i.fleet.doctrine_id?i.fleet.doctrine.name:"None"),oe=p(()=>i.fleet.mumble_id?i.fleet.mumble.name:"None"),ne=p(()=>typeof v.value),ae=p(()=>typeof c.value),H=p(()=>u.operationInfoRecon.filter(l=>l.operation_info_id==u.operationInfoPage.id&&l.operation_info_fleet_id==null)),ie=()=>{y.value=null,x.value=null},se=()=>{var l={reconID:y.value.id,role_id:x.value.id,opID:u.operationInfoPage.id};R({method:"post",url:"/api/operationinfofleetrecon/"+i.fleet.id,withCredentials:!0,data:l,headers:{Accept:"application/json","Content-Type":"application/json"}}).then(e=>{y.value=null,x.value=null})},ue=l=>{var e=l;R({method:"post",url:"/api/operationinfofleetreconremove/"+l.operation_info_id,withCredentials:!0,data:e,headers:{Accept:"application/json","Content-Type":"application/json"}})},re=(l,e)=>{var t={reconID:l.id,role_id:e.id,opID:u.operationInfoPage.id};R({method:"post",url:"/api/operationinfofleetrecon/"+i.fleet.id,withCredentials:!0,data:t,headers:{Accept:"application/json","Content-Type":"application/json"}})},V=()=>{},D=r(),Q=p(()=>D.value?u.operationInfoUsers.filter(l=>l.name.toLowerCase().indexOf(D.value)>-1):u.operationInfoUsers),de=(l,e,t)=>{e(()=>{D.value=l.toLowerCase(),Q.value.length>0&&l&&(v.value=Q.value[0])})},q=r(),U=p(()=>q.value?u.operationInfoUsers.filter(l=>l.name.toLowerCase().indexOf(q.value)>-1):u.operationInfoUsers),pe=(l,e,t)=>{e(()=>{q.value=l.toLowerCase(),U.value.length>0&&l&&(c.value=U.value[0])})},B=r(),j=p(()=>B.value?u.operationInfoDoctrines.filter(l=>l.name.toLowerCase().indexOf(B.value)>-1):u.operationInfoDoctrines),fe=(l,e,t)=>{e(()=>{B.value=l.toLowerCase(),j.value.length>0&&l&&(w.value=j.value[0])})},N=r(),M=p(()=>N.value?u.operationInfoMumble.filter(l=>l.name.toLowerCase().indexOf(N.value)>-1):u.operationInfoMumble),me=(l,e,t)=>{e(()=>{N.value=l.toLowerCase(),M.value.length>0&&l&&(h.value=M.value[0])})},S=r(),$=p(()=>S.value?H.value.filter(l=>l.name.toLowerCase().indexOf(S.value)>-1):H.value),ve=(l,e,t)=>{e(()=>{S.value=l.toLowerCase(),$.value.length>0&&l&&(y.value=$.value[0])})};return(l,e)=>(f(),b("div",null,[o(G,{class:"myRoundTop col-auto q-pb-xs",style:{height:"fit-content"}},{default:n(()=>[o(F,{class:"bg-negative text-center q-py-sm"},{default:n(()=>[s("span",Ve,d(C.fleet.name),1),o(m,{color:"green",icon:"fa-solid fa-edit",round:"",size:"xs",onClick:e[0]||(e[0]=t=>L.value=!0)})]),_:1}),o(F,null,{default:n(()=>[s("div",Ie,[s("span",Re," FC - "+d(ee.value),1),s("span",ke," Boss - "+d(te.value),1),s("span",Ae," Doctrine - "+d(le.value),1),s("span",Le," Mumble - "+d(oe.value),1)])]),_:1}),o(F,{class:"text-center q-py-none"},{default:n(()=>[s("div",Te,[o(m,{class:"col",color:"primary","no-caps":"",style:{width:"50%"},rounded:"",label:"Recon",onClick:e[1]||(e[1]=t=>T.value=!0)}),(f(!0),b(P,null,z(C.fleet.recons,(t,E)=>(f(),b("span",{class:"text-webway",key:E},[A(d(t.fleet_role.name)+" - "+d(t.name)+" ",1),t.system?(f(),b("span",De," - "+d(t.system.system_name),1)):X("",!0),o(he,{delay:500},{default:n(()=>[s("span",null,"Main - "+d(t.main.name),1),t.system?(f(),b("span",Qe,[qe,A(" System - "+d(t.system.system_name),1)])):X("",!0)]),_:2},1024)]))),128))])]),_:1})]),_:1}),o(K,{onBeforeShow:e[9]||(e[9]=t=>a(W)()),modelValue:L.value,"onUpdate:modelValue":e[10]||(e[10]=t=>L.value=t),persistent:""},{default:n(()=>[o(G,{class:"myRoundTop col-auto",style:{"min-height":"300px",width:"500px"}},{default:n(()=>[o(F,{class:"bg-primary text-center q-py-sm"},{default:n(()=>[s("span",Ue,"Edit Fleet - "+d(C.fleet.name),1),I(o(m,{color:"warning",flat:"",icon:"fa-solid fa-trash-can",onClick:e[2]||(e[2]=t=>a(Z)())},null,512),[[k]])]),_:1}),o(F,null,{default:n(()=>[s("div",Be,[o(Fe,{dense:"",outlined:"",rounded:"",modelValue:g.value,"onUpdate:modelValue":e[3]||(e[3]=t=>g.value=t),type:"text",label:"Fleet Name"},null,8,["modelValue"]),o(_,{modelValue:v.value,"onUpdate:modelValue":e[4]||(e[4]=t=>v.value=t),dense:"",outlined:"",rounded:"","use-input":"","new-value-mode":"add-unique","option-label":"name",clearable:"","option-value":"id",options:Q.value,label:"FC",onFilter:a(de),onFilterAbort:a(V)},null,8,["modelValue","options","onFilter","onFilterAbort"]),o(_,{modelValue:c.value,"onUpdate:modelValue":e[5]||(e[5]=t=>c.value=t),dense:"",outlined:"",rounded:"","option-label":"name",clearable:"","option-value":"id","use-input":"",options:U.value,label:"Boss",onFilter:a(pe),onFilterAbort:a(V)},null,8,["modelValue","options","onFilter","onFilterAbort"]),o(_,{modelValue:w.value,"onUpdate:modelValue":e[6]||(e[6]=t=>w.value=t),dense:"",outlined:"","option-label":"name",clearable:"","option-value":"id","use-input":"",options:j.value,label:"Doctrine",onFilter:a(fe),onFilterAbort:a(V),rounded:""},null,8,["modelValue","options","onFilter","onFilterAbort"]),o(_,{modelValue:h.value,"onUpdate:modelValue":e[7]||(e[7]=t=>h.value=t),dense:"",outlined:"","option-label":"name",clearable:"","option-value":"id",options:M.value,label:"Mumble","use-input":"",rounded:"",onFilter:a(me),onFilterAbort:a(V)},null,8,["modelValue","options","onFilter","onFilterAbort"])])]),_:1}),o(J,{align:"around"},{default:n(()=>[I(o(m,{rounded:"",color:"positive",label:"Update",disable:!g.value,onClick:e[8]||(e[8]=t=>a(Y)())},null,8,["disable"]),[[k]]),I(o(m,{rounded:"",color:"negative",label:"Close"},null,512),[[k]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(K,{modelValue:T.value,"onUpdate:modelValue":e[14]||(e[14]=t=>T.value=t),persistent:"",onBeforeHide:e[15]||(e[15]=t=>a(ie)())},{default:n(()=>[o(G,{class:"myRoundTop col-auto",style:{width:"500px"}},{default:n(()=>[o(F,{class:"bg-primary text-center q-py-sm"},{default:n(()=>[s("span",je,"Edit Recon for "+d(C.fleet.name),1)]),_:1}),o(F,null,{default:n(()=>[s("div",Ne,[s("div",Me,[o(_,{modelValue:y.value,"onUpdate:modelValue":e[11]||(e[11]=t=>y.value=t),dense:"","option-label":"name",clearable:"","option-value":"id",options:$.value,label:"Recon",outlined:"",rounded:"",onFilter:a(ve),onFilterAbort:a(V),"use-input":""},null,8,["modelValue","options","onFilter","onFilterAbort"])]),s("div",Se,[o(_,{modelValue:x.value,"onUpdate:modelValue":e[12]||(e[12]=t=>x.value=t),dense:"","option-label":"name",clearable:"","option-value":"id",options:a(u).operationInfoReconFleetRoleList,label:"Role",outlined:"",rounded:""},null,8,["modelValue","options"])]),s("div",$e,[o(m,{dense:"",color:"positive",rounded:"",label:"Add",onClick:e[13]||(e[13]=t=>a(se)()),disable:!y.value||!x.value},null,8,["disable"])])])]),_:1}),o(F,null,{default:n(()=>[s("div",Ee,[(f(!0),b(P,null,z(C.fleet.recons,(t,E)=>(f(),b("span",{class:"text-webway",key:E},[A(d(t.name)+" - "+d(t.fleet_role.name)+" ",1),o(m,{flat:"",round:"",size:"xs",color:"secondary",icon:"fa-solid fa-edit"},{default:n(()=>[o(ye,null,{default:n(()=>[o(Ce,{style:{"min-width":"100px"}},{default:n(()=>[(f(!0),b(P,null,z(a(u).operationInfoReconFleetRoleList,(O,ce)=>I((f(),xe(we,{clickable:"",onClick:Oe=>a(re)(t,O),key:ce},{default:n(()=>[o(_e,null,{default:n(()=>[A(d(O.name),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[k]])),128)),o(ge)]),_:2},1024)]),_:2},1024)]),_:2},1024),o(m,{flat:"",round:"",size:"xs",color:"negative",icon:"fa-solid fa-trash-can",onClick:O=>a(ue)(t)},null,8,["onClick"])]))),128))])]),_:1}),o(J,{align:"center"},{default:n(()=>[I(o(m,{rounded:"",color:"negative",label:"Close"},null,512),[[k]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{Je as default};
