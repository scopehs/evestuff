import{az as ge,a as we,u as he,r as b,c as m,h as t,e as s,j as f,f as o,w as l,aD as v,z as B,A as r,B as _,l as u,aB as S,be as Q,s as A,F as C,t as $,n as c,D as p,aP as L,C as I,x as j,q as x,m as D,aE as T,v as P,ah as R,G as U}from"./app.10579c01.js";import{Q as y}from"./QImg.fef93354.js";const ke={class:"row justify-around"},be={class:"col"},Se={class:"col"},Ae={class:"col"},Ce={class:"row flex-center"},$e={class:"col"},Le={class:"q-ml-sm"},je={class:"row full-width justify-start items-baseline"},xe={class:"col-auto"},Oe={class:"col-auto q-pl-lg"},Ie={class:"q-ml-sm"},De={class:"row full-width justify-start items-baseline"},Ne={class:"col-auto"},ze={class:"col-auto q-pl-lg"},Ee={class:"q-ml-sm"},Ve={class:"row full-width justify-start items-baseline"},qe={class:"col-auto"},Be={class:"col-auto q-pl-lg"},Re={__name:"DscanLocal",setup(Qe){let J=ge();we();let n=he(),g=b(null),N=b(!1),w=b(null),z=b(!1),E=b(!1),O=b(null),K=a=>{g.value=a,N.value=!0},W=m(()=>{if(g.value)return n.dScan.locals.filter(a=>a.corp&&a.corp.alliance_id==g.value.details.id).sort((a,i)=>a.name.localeCompare(i.name))}),X=a=>{w.value=a,z.value=!0},Y=a=>{O.value=a,E.value=!0},Z=m(()=>{if(w.value)return n.dScan.locals.filter(a=>a.corp_id==w.value.details.id).sort((a,i)=>a.name.localeCompare(i.name))}),ee=m(()=>{if(O.value)return n.dScan.locals.filter(a=>a.corp&&a.corp.alliance_id&&a.corp.alliance.affiliation_id==O.value.details.id).sort((a,i)=>a.name.localeCompare(i.name))}),V=a=>`https://imageserver.eveonline.com/Character/${a}_64.jpg`,q=a=>{if(a.new)return"bg-positive";if(a.left)return"bg-negative"},ae=m(()=>{let a=0;return!n.dScanLocalAlliance||Object.values(n.dScanLocalAlliance).length==0?0:(Object.values(n.dScanLocalAlliance).forEach(i=>{a+=i.new}),a)}),le=m(()=>{let a=0;return!n.dScanLocalAlliance||Object.values(n.dScanLocalAlliance).length==0?0:(Object.values(n.dScanLocalAlliance).forEach(i=>{a+=i.left}),a)}),te=m(()=>{let a=0;return!n.dScanLocalAlliance||Object.values(n.dScanLocalAlliance).length==0?0:(Object.values(n.dScanLocalAlliance).forEach(i=>{a+=i.same}),a)}),ie=m(()=>{let a=0;return!n.dScanLocalAlliance||Object.values(n.dScanLocalAlliance).length==0?0:(Object.values(n.dScanLocalAlliance).forEach(i=>{a+=i.totalInSystem}),a)}),F=m(()=>{var a=ae.value,i=le.value*-1,e=te.value;if(e>0)var d=a+i;else var d=0;return d}),ne=m(()=>{let a=0;return!n.dScanLocalCorp||Object.values(n.dScanLocalCorp).length==0?0:(Object.values(n.dScanLocalCorp).forEach(i=>{a+=i.new}),a)}),oe=m(()=>{let a=0;return!n.dScanLocalCorp||Object.values(n.dScanLocalCorp).length==0?0:(Object.values(n.dScanLocalCorp).forEach(i=>{a+=i.left}),a)}),ce=m(()=>{let a=0;return!n.dScanLocalCorp||Object.values(n.dScanLocalCorp).length==0?0:(Object.values(n.dScanLocalCorp).forEach(i=>{a+=i.same}),a)}),se=m(()=>{let a=0;return!n.dScanLocalCorp||Object.values(n.dScanLocalCorp).length==0?0:(Object.values(n.dScanLocalCorp).forEach(i=>{a+=i.totalInSystem}),a)}),G=m(()=>{var a=ne.value,i=oe.value*-1,e=ce.value;if(e>0)var d=a+i;else var d=0;return d}),re=m(()=>{let a=0;return!n.dScanLocalAffiliation||Object.values(n.dScanLocalAffiliation).length==0?0:(Object.values(n.dScanLocalAffiliation).forEach(i=>{a+=i.new}),a)}),de=m(()=>{let a=0;return!n.dScanLocalAffiliation||Object.values(n.dScanLocalAffiliation).length==0?0:(Object.values(n.dScanLocalAffiliation).forEach(i=>{a+=i.left}),a)}),ue=m(()=>{let a=0;return!n.dScanLocalAffiliation||Object.values(n.dScanLocalAffiliation).length==0?0:(Object.values(n.dScanLocalAffiliation).forEach(i=>{a+=i.same}),a)}),fe=m(()=>{let a=0;return!n.dScanLocalAffiliation||Object.values(n.dScanLocalAffiliation).length==0?0:(Object.values(n.dScanLocalAffiliation).forEach(i=>{a+=i.totalInSystem}),a)}),M=m(()=>{var a=re.value,i=de.value*-1,e=ue.value;if(e>0)var d=a+i;else var d=0;return d}),h=a=>a>0?"text-green":a<0?"text-red":"text-white",me=a=>{if(a==10)return"bg-blue-10";if(a>=5)return"bg-blue-5";if(a>0)return"bg-light-blue-5";if(a==0)return"";if(a>=-5)return"bg-red-5";if(a<-5)return"bg-red-10"},ve=a=>{var i=0,e=a.standing?a.standing:0,d=a.alliance?a.alliance.standing:0;if(e==0?i=d:i=e,i==10)return"bg-blue-10";if(i>=5)return"bg-blue-5";if(i>0)return"bg-light-blue-5";if(i==0)return"";if(i>=-5)return"bg-red-5";if(i<-5)return"bg-red-10"},_e=a=>{if(a.color==2)return"bg-blue-10";if(a.color==1)return"bg-red-5"},pe=m(()=>!!(n.dScanLocalCorp&&Object.values(n.dScanLocalCorp).filter(a=>a.details.ticker=="???").length)),ye=async()=>{var a=J.params.link;await axios({method:"post",withCredentials:!0,url:"/api/dscan/localupdate/"+a,headers:{Accept:"application/json","Content-Type":"application/json"}})},k=m(()=>{let a=135;return"max-height:"+(n.size.height-a+"px")});return(a,i)=>(t(),s("div",null,[f("div",ke,[f("div",be,[o(x,{class:"my-card"},{default:l(()=>[o(v,{class:"q-py-none text-center"},{default:l(()=>[B(" All Alliances - "+r(ie.value)+" ",1),f("span",{class:_(u(h)(F.value))}," ("+r(F.value)+")",3)]),_:1}),o(v,{class:"overflow-auto",style:S(k.value)},{default:l(()=>[o(Q,{mode:"out-in","enter-active-class":"animate__animated animate__bounceIn animate__slower","leave-active-class":"animate__animated animate__bounceOut animate__slower"},{default:l(()=>[o(A,{bordered:"",dense:""},{default:l(()=>[(t(!0),s(C,null,$(u(n).dScanLocalAlliance,(e,d)=>(t(),c(j,{clickable:"",class:_([[u(me)(e.details.standing),{ownD:!e.totalInSystem}],"cursor-pointer"]),key:d,onClick:H=>u(K)(e)},{default:l(()=>[(t(),s("div",{class:"row full-width justify-between items-center",key:`${e.id}-row-alliance`},[f("div",Se,[(t(),c(p,{size:"32px",key:`${e.id}-ave-alliance`},{default:l(()=>[(t(),c(y,{src:e.details.url,key:`${e.id}-img-alliance`},null,8,["src"]))]),_:2},1024))]),(t(),s("div",{class:"col",key:`${e.id}-ticket-col-alliance`},[(t(),s("span",{key:`${e.id}-row-ticker-alliance`},r(e.details.ticker),1))])),(t(),s("div",{class:"col",key:`${e.id}-totalinsystem-col-alliance`},[o(L,{mode:"out-in","enter-active-class":"animate__animated animate__flash "},{default:l(()=>[(t(),s("span",{key:`${e.totalInSystem}${e.id}-row-totalinsystem-alliance`},r(e.totalInSystem),1))]),_:2},1024),o(L,{mode:"out-in","enter-active-class":"animate__animated animate__flash "},{default:l(()=>[e.diff?(t(),s("span",{class:_(u(h)(e.diff)),key:`${e.totalInSystem}${e.id}-row-diffNumber`}," ("+r(e.diff)+")",3)):I("",!0)]),_:2},1024)]))]))]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["style"])]),_:1})]),f("div",Ae,[o(x,{class:"my-card"},{default:l(()=>[o(v,{class:"q-py-none text-center"},{default:l(()=>[f("div",Ce,[B(" All Corporations - "+r(se.value)+" ",1),f("span",{class:_(u(h)(G.value))}," ("+r(G.value)+")",3),pe.value?(t(),c(D,{key:0,color:"warning",flat:"",padding:"none",class:"q-ml-sm",size:"sm",round:"",icon:"fa-solid fa-arrows-rotate",onClick:u(ye)},null,8,["onClick"])):I("",!0)])]),_:1}),o(v,{class:"overflow-auto",style:S(k.value)},{default:l(()=>[o(A,{bordered:"",dense:""},{default:l(()=>[o(Q,{mode:"out-in","enter-active-class":"animate__animated animate__bounceIn animate__slower","leave-active-class":"animate__animated animate__bounceOut animate__slower"},{default:l(()=>[(t(!0),s(C,null,$(u(n).dScanLocalCorp,(e,d)=>(t(),c(j,{clickable:"",class:_([u(ve)(e.details),{ownD:!e.totalInSystem}]),key:d,onClick:H=>u(X)(e)},{default:l(()=>[(t(),s("div",{key:`${e.id}-row-corp`,class:"row full-width justify-between items-center"},[(t(),s("div",{class:"col",key:`${e.id}-avatar-col-corp`},[(t(),c(p,{size:"32px",key:`${e.id}-avatar-corp`},{default:l(()=>[(t(),c(y,{key:`${e.id}-img-corp`,src:e.details.url},null,8,["src"]))]),_:2},1024))])),(t(),s("div",{class:"col",key:`${e.id}-ticket-col-corp`},[(t(),s("span",{key:`${e.id}-row-ticker-corp`},r(e.details.ticker),1))])),(t(),s("div",{class:"col",key:`${e.id}-totalinsystem-col-corp`},[o(L,{mode:"out-in","enter-active-class":"animate__animated animate__flash "},{default:l(()=>[(t(),s("span",{key:`${e.totalInSystem}${e.id}-row-totalinsystem-corp`},r(e.totalInSystem),1))]),_:2},1024),o(L,{mode:"out-in","enter-active-class":"animate__animated animate__flash "},{default:l(()=>[e.diff?(t(),s("span",{class:_(u(h)(e.diff)),key:`${e.totalInSystem}${e.id}-row-diffNumber-corp`}," ("+r(e.diff)+")",3)):I("",!0)]),_:2},1024)]))]))]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["style"])]),_:1})]),f("div",$e,[o(x,{class:"my-card"},{default:l(()=>[o(v,{class:"q-py-none text-center"},{default:l(()=>[B(" All Affiliations - "+r(fe.value)+" ",1),f("span",{class:_(u(h)(M.value))}," ("+r(M.value)+")",3)]),_:1}),o(v,{class:"overflow-auto",style:S(k.value)},{default:l(()=>[o(A,{bordered:"",dense:""},{default:l(()=>[o(Q,{mode:"out-in","enter-active-class":"animate__animated animate__bounceIn animate__slower","leave-active-class":"animate__animated animate__bounceOut animate__slower"},{default:l(()=>[(t(!0),s(C,null,$(u(n).dScanLocalAffiliation,(e,d)=>(t(),c(j,{clickable:"",class:_([u(_e)(e.details),{ownD:!e.totalInSystem}]),key:d,onClick:H=>u(Y)(e)},{default:l(()=>[(t(),s("div",{key:`${e.id}-row-Affiliation`,class:"row full-width justify-between items-center"},[(t(),s("div",{class:"col",key:`${e.id}-ticket-col-Affiliation`},[(t(),s("span",{key:`${e.id}-row-ticker-Affiliation`},r(e.details.short_name),1))])),(t(),s("div",{class:"col",key:`${e.id}-totalinsystem-col-Affiliation`},[o(L,{mode:"out-in","enter-active-class":"animate__animated animate__flash "},{default:l(()=>[(t(),s("span",{key:`${e.totalInSystem}${e.id}-row-totalinsystem-Affiliation`},r(e.totalInSystem),1))]),_:2},1024),o(L,{mode:"out-in","enter-active-class":"animate__animated animate__flash "},{default:l(()=>[e.diff?(t(),s("span",{class:_(u(h)(e.diff)),key:`${e.totalInSystem}${e.id}-row-diffNumber-Affiliation`}," ("+r(e.diff)+")",3)):I("",!0)]),_:2},1024)]))]))]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["style"])]),_:1})])]),o(R,{modelValue:N.value,"onUpdate:modelValue":i[0]||(i[0]=e=>N.value=e),persistent:""},{default:l(()=>[o(x,{class:"myRoundTop",style:{"min-width":"20vw","max-width":"30vw"}},{default:l(()=>[o(v,{class:"row items-center"},{default:l(()=>[(t(),c(p,{size:"32px",key:`${g.value.id}-ave-alliance-dialog`},{default:l(()=>[(t(),c(y,{src:g.value.details.url,key:`${g.value.id}-img-alliance-dialog`},null,8,["src"]))]),_:1})),f("span",Le,"Pilots in "+r(g.value.details.ticker)+".",1)]),_:1}),o(v,{class:"overflow-auto",style:S(k.value)},{default:l(()=>[o(A,{bordered:"",dense:""},{default:l(()=>[(t(!0),s(C,null,$(W.value,(e,d)=>(t(),c(j,{key:d,dense:"",class:_(u(q)(e.pivot))},{default:l(()=>[f("div",je,[f("div",xe,[(t(),c(p,{size:"32px",key:`${e.id}-ave-alliance-dialog-list`},{default:l(()=>[(t(),c(y,{src:e.corp.url,key:`${e.id}-img-alliance-dialog-list`},null,8,["src"]))]),_:2},1024)),(t(),c(p,{size:"32px",key:`${e.id}-ave-alliance-dialog-list`},{default:l(()=>[(t(),c(y,{src:u(V)(e.id),key:`${e.id}-img-alliance-dialog-list`},null,8,["src"]))]),_:2},1024))]),f("div",Oe,r(e.name)+" - "+r(e.corp.ticker),1)])]),_:2},1032,["class"]))),128))]),_:1})]),_:1},8,["style"]),o(T,{align:"right"},{default:l(()=>[P(o(D,{rounded:"",label:"close",color:"negative"},null,512),[[U]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(R,{modelValue:z.value,"onUpdate:modelValue":i[1]||(i[1]=e=>z.value=e),persistent:""},{default:l(()=>[o(x,{class:"myRoundTop",style:{"min-width":"20vw","max-width":"30vw"}},{default:l(()=>[o(v,{class:"row items-center"},{default:l(()=>[(t(),c(p,{size:"32px",key:`${w.value.id}-ave-alliance-dialog`},{default:l(()=>[(t(),c(y,{src:w.value.details.url,key:`${w.value.id}-img-alliance-dialog`},null,8,["src"]))]),_:1})),f("span",Ie,"Pilots in "+r(w.value.details.ticker)+".",1)]),_:1}),o(v,{class:"overflow-auto",style:S(k.value)},{default:l(()=>[o(A,{bordered:"",dense:""},{default:l(()=>[(t(!0),s(C,null,$(Z.value,(e,d)=>(t(),c(j,{key:d,dense:"",class:_(u(q)(e.pivot))},{default:l(()=>[f("div",De,[f("div",Ne,[(t(),c(p,{size:"32px",key:`${e.id}-ave-alliance-dialog-list`},{default:l(()=>[(t(),c(y,{src:u(V)(e.id),key:`${e.id}-img-alliance-dialog-list`},null,8,["src"]))]),_:2},1024))]),f("div",ze,r(e.name)+" - "+r(e.corp.ticker),1)])]),_:2},1032,["class"]))),128))]),_:1})]),_:1},8,["style"]),o(T,{align:"right"},{default:l(()=>[P(o(D,{rounded:"",label:"close",color:"negative"},null,512),[[U]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(R,{modelValue:E.value,"onUpdate:modelValue":i[2]||(i[2]=e=>E.value=e),persistent:""},{default:l(()=>[o(x,{class:"myRoundTop",style:{"min-width":"20vw","max-width":"30vw"}},{default:l(()=>[o(v,{class:"row items-center"},{default:l(()=>[f("span",Ee,"Pilots in "+r(O.value.details.name)+".",1)]),_:1}),o(v,{class:"overflow-auto",style:S(k.value)},{default:l(()=>[o(A,{bordered:"",dense:""},{default:l(()=>[(t(!0),s(C,null,$(ee.value,(e,d)=>(t(),c(j,{key:d,dense:"",class:_(u(q)(e.pivot))},{default:l(()=>[f("div",Ve,[f("div",qe,[(t(),c(p,{size:"32px",key:`${e.id}-ave-affilition-dialog-list`},{default:l(()=>[(t(),c(y,{src:e.corp.alliance.url,key:`${e.id}-img-affilition-dialog-list`},null,8,["src"]))]),_:2},1024)),(t(),c(p,{size:"32px",key:`${e.id}-ave-affilition-dialog-list`},{default:l(()=>[(t(),c(y,{src:e.corp.url,key:`${e.id}-img-affilition-dialog-list`},null,8,["src"]))]),_:2},1024)),(t(),c(p,{size:"32px",key:`${e.id}-ave-affilition-dialog-list`},{default:l(()=>[(t(),c(y,{src:u(V)(e.id),key:`${e.id}-img-affilition-dialog-list`},null,8,["src"]))]),_:2},1024))]),f("div",Be,r(e.name)+" - "+r(e.corp.alliance.ticker)+" - ("+r(e.corp.ticker)+") ",1)])]),_:2},1032,["class"]))),128))]),_:1})]),_:1},8,["style"]),o(T,{align:"right"},{default:l(()=>[P(o(D,{rounded:"",label:"close",color:"negative"},null,512),[[U]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{Re as default};
