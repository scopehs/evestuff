import{Q}from"./QSelect.32be28f9.js";import{i as B,u as k,r as p,c as i,h as m,e as A,n as g,w as o,f as l,q as h,aD as j,j as D,C as w,Q as S,bo as I,aE as T,m as v,l as f,v as U,p as H,G as O}from"./app.10579c01.js";import"./QItemLabel.1f7b55df.js";const q={class:"column q-gutter-md"},M={__name:"AddNode",props:{item:Object,operationID:Number,activeCampaigns:Array},setup(y){const n=y;let b=B("can"),V=k(),u=p(null),t=p(""),s=p(!1),_=()=>{t.value="",u.value=null,s.value=!1},c=async()=>{if(d.value==1)var r=n.activeCampaigns[0].id;else var r=u.value.id;let e=t.value.toUpperCase();var a={system_id:n.item.id,campaign_id:r,name:e};t.value="",s.value=!1,await axios({method:"POST",url:"/api/addnode",withCredentials:!0,data:a,headers:{Accept:"application/json","Content-Type":"application/json"}})},x=i(()=>d.value>0?V.newOperationInfo.read_only==1?!!b("view_operation_read_only"):!0:!1),d=i(()=>n.activeCampaigns.length),C=i(()=>d.value!=1),N=i(()=>d.value==1);return(r,e)=>(m(),A("div",null,[x.value?(m(),g(v,{key:0,color:"positive",padding:"none",flat:"",icon:"fa-solid fa-plus",label:"Node"},{default:o(()=>[l(H,{persistent:"",modelValue:s.value,"onUpdate:modelValue":e[4]||(e[4]=a=>s.value=a),onBeforeHide:f(_)},{default:o(()=>[l(h,{class:"myRoundTop",style:{width:"250px","max-width":"80vw"}},{default:o(()=>[l(j,null,{default:o(()=>[D("div",q,[C.value?(m(),g(Q,{key:0,modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=a=>u.value=a),label:"Campaign","option-label":"name","option-value":"id",options:n.activeCampaigns,autofocus:C.value,outlined:"",rounded:""},null,8,["modelValue","options","autofocus"])):w("",!0),l(S,{label:"Node Name",autofocus:N.value,mask:"AA##",modelValue:t.value,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value=a),type:"text",onKeyup:e[2]||(e[2]=I(a=>f(c)(),["enter"])),outlined:"",rounded:""},null,8,["autofocus","modelValue"])])]),_:1}),l(T,{align:"center"},{default:o(()=>[l(v,{rounded:"",color:"positive",label:"Add",disable:t.value.length!=4,onClick:e[3]||(e[3]=a=>f(c)())},null,8,["disable"]),U(l(v,{rounded:"",color:"negative",label:"Close"},null,512),[[O]])]),_:1})]),_:1})]),_:1},8,["modelValue","onBeforeHide"])]),_:1})):w("",!0)]))}};export{M as default};
