import{d as O,_ as Q,o as S,r as C,c,h as d,e as p,f as i,w as r,C as f,n as j,z as B,A as v,l as s,p as P,q as H,aD as N,Q as L,aE as M,v as _,m,G as T}from"./app.10579c01.js";const $={key:0},z={key:2},Z={__name:"NotificationTimer",props:{item:Object},setup(D){const a=D,k=O(()=>Q(()=>import("./index.96e5e95a.js"),["assets/index.96e5e95a.js","assets/app.10579c01.js","assets/app.4fce15f2.css"]));S(async()=>{y()});let l=C(!1),u=C(null),w=()=>{l.value=!0},y=()=>{if(a.item.end_time){const n=new Date(a.item.end_time+"Z"),e=Date.now();n.getTime()-e<0&&(l.value=!0)}},b=async()=>{var n=parseInt(u.value.substr(0,2)),e=parseInt(u.value.substr(3,2));e=n*60+e;var e=e/(100/100),t=new Date(Date.now()+e*1e3).toISOString().replace("T"," ").substr(0,19),o={end_time:t};await axios({method:"put",withCredentials:!0,url:"/api/notifications/"+a.item.id,data:o,headers:{Accept:"application/json","Content-Type":"application/json"}})},h=async()=>{var n={end_time:null};await axios({method:"put",withCredentials:!0,url:"/api/notifications/"+a.item.id,data:n,headers:{Accept:"application/json","Content-Type":"application/json"}})},g=n=>{const e=new Date(n+"Z"),t=Date.now();return e.getTime()-t},A=n=>{const e={};return Object.entries(n).forEach(([t,o])=>{e[t]=o<10?`0${o}`:String(o)}),e},E=c(()=>a.item.end_time?"red":"green"),x=c(()=>a.item.end_time?"Edit":"Add"),V=c(()=>a.item.status_id==5?"Was It Reffed?":"Is it Secure?");return(n,e)=>(d(),p("div",null,[i(m,{class:"myOutLineButtonLarge",size:"md",color:E.value,rounded:""},{default:r(()=>[a.item.end_time?f("",!0):(d(),p("span",$,"Add Timer")),a.item.end_time&&!l.value?(d(),j(s(k),{key:1,time:s(g)(a.item.end_time),interval:1e3,"emit-events":!0,onEnd:s(w),transform:s(A)},{default:r(({hours:t,minutes:o,seconds:I})=>[B(v(o)+":"+v(I),1)]),_:1},8,["time","onEnd","transform"])):f("",!0),l.value?(d(),p("span",z,v(V.value),1)):f("",!0),i(P,null,{default:r(()=>[i(H,{class:"my-card"},{default:r(()=>[i(N,null,{default:r(()=>[i(L,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=t=>u.value=t),type:"text",label:"Hack Time mm:ss",mask:"##:##",autofocus:"",rounded:"",outlined:""},null,8,["modelValue"])]),_:1}),i(M,{align:"center"},{default:r(()=>[_(i(m,{color:"positive",rounded:"",label:x.value,onClick:e[1]||(e[1]=t=>s(b)())},null,8,["label"]),[[T]]),_(i(m,{color:"negative",rounded:"",label:"Close"},null,512),[[T]]),_(i(m,{color:"info",rounded:"",label:"Clear",onClick:e[2]||(e[2]=t=>s(h)())},null,512),[[T]])]),_:1})]),_:1})]),_:1})]),_:1},8,["color"])]))}};export{Z as default};
